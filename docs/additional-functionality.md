# Додаткова реалізована функціональність проекту "Secret Nick"

## Огляд проекту

**Secret Nick** — це повнофункціональний веб-застосунок для організації таємного обміну подарунками (Secret Santa) з розповсюдженням на кілька фронтенд-рішень та масштабованою хмарною інфраструктурою.

---

## 1. Мультимовна підтримка фронтенду

### React фронтенд
- **Поточна реалізація:** Забезпечує відзивчивий інтерфейс для організації кімнат обміну подарунками
- **Функціональність:** Управління кімнатами, додавання учасників, перегляд списків учасників
- **Технологічний стек:** React + Vite + TypeScript + SCSS
- **Оптимізація:** Vite забезпечує швидку розробку і будування з HMR (Hot Module Replacement)

### Angular фронтенд
- **Альтернативна реалізація:** Quella ж функціональність на базі Angular framework
- **Технологічний стек:** Angular + TypeScript + SCSS
- **Переваги:** Альтернативний вибір для команд, що окремо розробляють UI

### Разметкова версія (Markup)
- **Статична версія:** HTML/CSS для прототипування і навчання
- **Використання:** Базовий макет для обох фронтенд-рішень

---

## 2. Масштабована архітектура бекенду (.NET)

### Многошарова архітектура
```
Api Layer          (REST endpoints, controllers)
├─ Application     (use cases, business logic)
├─ Domain          (entities, value objects)
└─ Infrastructure  (data access, external services)
```

### Основні компоненти API

#### Управління кімнатами
- **POST /api/rooms** — створення нової кімнати обміну подарунками
- **GET /api/rooms** — отримання інформації про кімнату
- **Функціональність:** Валідація бюджету, дата обміну, опис

#### Управління користувачами
- **POST /api/users** — додавання користувача в кімнату за кодом запрошення
- **GET /api/users** — отримання списку користувачів кімнати
- **DELETE /api/users/[id]** — видалення користувача (тільки адміністратором)
- **Функціональність:** 
  - Унікальні коди користувача для доступу
  - Список бажань (wish list)
  - Контактна інформація та адреса доставки
  - Роль адміністратора кімнати

#### Валідація на 2му рівні складності
- Перевірка наявності користувача за ID
- Перевірка наявності адміністратора за кодом
- Валідація прав доступу адміністратора
- Перевірка належності користувачів до однієї кімнати
- Запобігання самовидаленню користувача
- Перевірка статусу кімнати (закрита/активна)

---

## 3. Автоматизована хмарна інфраструктура (AWS + Terraform)

### Інфраструктура як код (IaC)
Повна автоматизація розгортання на AWS використовуючи Terraform

#### Модулі Terraform

##### 01-vpc (Virtual Private Cloud)
- Création приватної мережі для додатка
- Настроювання підмереж для мікросервісів
- Internet Gateway для зовнішнього доступу

##### 02-sg (Security Groups)
- Правила брандмауера для контролю трафіку
- Доступ на порти 80 (HTTP), 443 (HTTPS), 5432 (PostgreSQL)
- Ізоляція між компонентами додатка

##### 03-ec2 (Elastic Compute Cloud)
- Віртуальні машини для запуску Docker контейнерів
- Автоматичне масштабування за потребою
- Інтеграція з ALB (Application Load Balancer)

##### 04-rds (Relational Database Service)
- Керована база даних PostgreSQL 16
- Автоматичне резервне копіювання
- Multi-AZ розгортання для високої доступності

##### 05-alb (Application Load Balancer)
- Розподіл трафіку між реплікамі додатка
- HTTPS слухач з SSL/TLS сертифікатами
- Автоматичне перенаправлення HTTP на HTTPS
- Target groups для React, Angular та .NET backend

### Діяльність з GitHub Actions
- **Workflow:** "terraform AWS deployment"
- **Можливості:** Розгортання окремих модулів або повної інфраструктури
- **Параметри:** Вибір модуля та дії (plan/apply/destroy)

### SSL/TLS сертифікати
- Інтеграція з AWS Certificate Manager (ACM)
- Підтримка самопідписаних сертифікатів для розробки
- Автоматичне управління сертифікатами в ACM

---

## 4. Docker контейнеризація

### Docker Compose для локальної розробки

#### Сервіси в compose.yml
```yaml
front-angular   - Angular фронтенд (порт 8081)
front-react     - React фронтенд (порт 8082)
backend         - .NET API сервіс (порт 8080)
db              - PostgreSQL база даних (порт 5432)
```

#### Особливості
- Health check для бази даних перед запуском API
- Автоматичне встановлення залежностей
- Ізольовані мережі для безпеки
- Обсяги для персистентності даних БД
- Змінні окруження для конфігурації

### Dockerfile оптимізація
- Multi-stage builds для зменшення розміру образів
- Кешування шарів для прискорення будування
- Мінімальні базові образи (nginx, dotnet runtime)

---

## 5. Автоматизовано тестування

### Reqnroll + NUnit BDD фреймворк

#### Структура тестування
```
Tests/
├─ Api/              - API тести
├─ Ui/               - UI тести
├─ Features/         - Gherkin сценарії
├─ Hooks/            - Setup/teardown
└─ Helpers/          - Утилітарні функції
```

#### Можливості
- **BDD сценарії (Gherkin):** Описання поведінки мовою, близькою до бізнесу
- **API тести:** Валідація всіх REST ендпоінтів
- **UI тести:** Тестування взаємодії користувача з фронтенду
- **Автоматичне запускання:** Інтеграція в CI/CD pipeline

---

## 6. Розширена валідація та обробка помилок

### Бізнес-логіка з валідацією

#### FluentValidation інтеграція
- Валідатори для всіх DTO моделей
- Кастомні правила валідації
- Локалізовані повідомлення про помилки

#### Обробка помилок
- Глобальні фільтри винятків (Exception Filters)
- Консистентні HTTP відповіді з кодами помилок
- Дітальні повідомлення для налагодження

#### Специфічні перевірки
- Валідація кодів запрошення
- Перевірка бюджету подарунків
- Контроль максимального кількості учасників
- Перевірка дат обміну

---

## 7. Веб-API документація

### Swagger/OpenAPI
- **Інтерактивна документація:** Swagger UI на `/swagger/index.html`
- **Автоматичне генерування:** Документація синхронізується з кодом
- **Тестування з браузера:** Можливість тестування API прямо з документації

### REST API ендпоінти
- Повна CRUD операційність для кімнат і користувачів
- RESTful принципи дизайну
- Коректні HTTP статус коди

---

## 8. Багатошарова база даних

### PostgreSQL 16
- **Схема:** Оптимізована для операцій читання/запису
- **Індекси:** На часто запитуваних полях
- **Constraints:** Для забезпечення цілісності даних

### Entity Framework Core
- **ORM:** Абстракція від SQL для безпеки
- **Міграції:** Версіонування схеми бази даних
- **LINQ запити:** Типобезпечна робота з даними

---

## 9. Безпека

### Захисні механізми
- **Унікальні коди користувача:** Крім ID для запобігання guess attacks
- **Ролева авторизація:** Адміністратори мають спеціальні права
- **HTTPS шифрування:** Весь трафік захищено SSL/TLS
- **SQL Injection захист:** Використання параметризованих запитів через EF Core
- **CORS налаштування:** Контроль доступу між доменами

---

## 10. Развитие DevOps

### CI/CD Pipeline
- **GitHub Actions:** Автоматизація будування та развертывания
- **Docker Registry:** Збереження образів контейнерів
- **Infrastructure Automation:** Terraform для одного кліку розгортання

### Моніторинг та логування
- **Application Insights:** Інтеграція з AWS/Azure для аналітики
- **Структуровані логи:** JSON формат для парсування
- **Трасування помилок:** Stack traces для налагодження

---

## 11. Документація проекту

### Комплексна документація
- `docs/compose-readme.md` — Локальна розробка з Docker Compose
- `docs/terraform-readme.md` — AWS розгортання та конфігурація
- `docs/ssl-deployment-steps.md` — HTTPS налаштування
- `backend/README.md` — API документація та інструкції
- `frontend/react/README.md` — React розробка
- `frontend/angular/README.md` — Angular розробка

### Інструкції для розробників
- Налаштування локального середовища
- Структура проекту та архітектурні рішення
- Процес будування та розгортання
- Приклади API запитів

---

## 12. Масштабованість та продуктивність

### Оптимізація
- **Vite:** Швидке будування та розробка
- **React/Angular:** Оптимізовані рендерінг компонентів
- **Connection Pooling:** Ефективне використання з'єднань з БД
- **Caching:** Стратегії кешування для зменшення навантаження

### Горизонтальне масштабування
- **ALB:** Розподіл трафіку між інстансами
- **Auto Scaling Groups:** Автоматичне масштабування за метриками
- **RDS:** Читання репліки для масштабування запитів

---

## Технологічний стек

| Слой | Технологія |
|------|-----------|
| **Фронтенд** | React (Vite), Angular, HTML/CSS/SCSS |
| **Бекенд** | .NET 9, C#, ASP.NET Core, Entity Framework Core |
| **База Даних** | PostgreSQL 16 |
| **Інфраструктура** | AWS (EC2, RDS, ALB, ACM), Terraform |
| **Контейнеризація** | Docker, Docker Compose |
| **CI/CD** | GitHub Actions |
| **Тестування** | NUnit, Reqnroll (BDD), Selenium (UI) |
| **API Документація** | Swagger/OpenAPI |

---

## Висновок

Проект **Secret Nick** демонструє комплексну реалізацію сучасної архітектури для веб-застосунку:
- ✅ Мультиплатформена фронтенд-розробка (React, Angular)
- ✅ Масштабована сервер-архітектура (.NET)
- ✅ Повна автоматизація інфраструктури (Terraform + AWS)
- ✅ Контейнеризована розробка та розгортання
- ✅ Комплексне тестування (BDD, API, UI)
- ✅ Виробнича готовність з HTTPS та моніторингом

Проект може бути використаний як базис для промислових застосунків та демонструє найкращі практики сучасної хмарної розробки.
